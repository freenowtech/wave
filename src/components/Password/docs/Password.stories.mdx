import { useState, ChangeEvent } from 'react';
import { Canvas, Story, ArgsTable, Meta } from '@storybook/addon-docs';
import { StyledSystemLinks } from '../../../docs/StyledSystemLinks';
import { Password } from '../Password';

<Meta
    title="Form Elements/Password"
    component={Password}
    argTypes={{
        variant: {
            options: ['boxed', 'bottom-lined'],
            defaultValue: 'boxed',
            control: 'radio'
        },
        size: {
            options: ['small', 'medium'],
            defaultValue: 'medium',
            control: 'radio'
        }
    }}
/>

export const Template = args => <Password {...args} />;

# Password

A form input component to ask for a password or set a password.

It has two modes a user can toggle between with a button:

-   `hidden` — the password is hidden
-   `shown` — the password is shown as plain text

<Canvas>
    <Story
        name="Default"
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password'
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

<br />

## Properties

<ArgsTable of={Password} />

<StyledSystemLinks component="Password" supportedProps={['margin', 'width']} />

<br />

## Use cases

<br />

### Login

By default, `<Password />` has the settings to be used for login screen or any case when a user
must provide the existing password.

In that case the browser, or the password manager will recognise the password field and will offer autocomplete.

<br />

### Sign up or reset password

If you are in the situation when a user needs to create a new password, set `purpose` prop to `new-password`:

```jsx
<Password purpose="new-password" label="New password" />
```

This will allow password managers to generate a password for the user automatically.

<br />

## Accessibility

<br />

The component is done with accessibility in mind and has built-in English aria labels for the button and the component state.

When screen reader user clicks the toggle mode button, the screen reader announces the new state "Your password is hidden/shown":

{/* Video does not seem to load in stories.mdx file, will investigate */}

<video src={'/public/password/a11y.mp4'} controls />

**If you project supports multiple languages it is recommended to pass translated labels to the component:**

```jsx
<Password
    label="Password"
    aria={{
        showPasswordButton: 'Show password',
        hidePasswordButton: 'Hide password',
        messagePasswordIsHidden: 'Your password is hidden',
        messagePasswordIsShown: 'Your password is shown'
    }}
/>
```

The keys to set are:

-   `showPasswordButton` - the label of the button when the password is hidden
-   `hidePasswordButton` - the label of the button when the password is shown
-   `messagePasswordIsHidden` - the message to announce the state of the component after the password value is hidden
-   `messagePasswordIsShown` - the message to announce the state of the component after the password value is shown

<br />

# Stories

<br />

### Default | Boxed

<Canvas>
    <Story
        name="Boxed"
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password'
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Default | Bottom-lined

<Canvas>
    <Story
        name="Bottom-Lined"
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password'
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Default | Boxed | Small

<Canvas>
    <Story
        name="Boxed | Small"
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            size: 'small'
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Default | Bottom-lined | Small

<Canvas>
    <Story
        name="Bottom-lined | Small"
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            size: 'small'
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Error | Boxed

<Canvas>
    <Story
        name="Error | Boxed"
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            error: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Error | Bottom-lined

<Canvas>
    <Story
        name="Error | Bottom-Lined"
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            error: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Disabled | Boxed

<Canvas>
    <Story
        name="Disabled | Boxed"
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            disabled: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Disabled | Bottom-lined

<Canvas>
    <Story
        name="Disabled | Bottom-Lined"
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            disabled: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Boxed

<Canvas>
    <Story
        name="Inverted | Boxed"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Bottom-lined

<Canvas>
    <Story
        name="Inverted | Bottom-lined"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Error | Boxed

<Canvas>
    <Story
        name="Inverted | Error | Boxed"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true,
            error: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Error | Bottom-lined

<Canvas>
    <Story
        name="Inverted | Error | Bottom-lined"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true,
            error: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Disabled | Boxed

<Canvas>
    <Story
        name="Inverted | Disabled | Boxed"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'boxed',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true,
            disabled: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Inverted | Disabled | Bottom-lined

<Canvas>
    <Story
        name="Inverted | Disabled | Bottom-lined"
        decorators={[
            Story => (
                <div style={{ background: '#001E3E', padding: '1rem' }}>
                    <Story />
                </div>
            )
        ]}
        args={{
            variant: 'bottom-lined',
            placeholder: '********',
            label: 'Password',
            id: 'password',
            inverted: true,
            disabled: true
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>
