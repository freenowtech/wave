import { Meta, Story } from '@storybook/blocks';

import { Source } from '../../../docs/Source';
import { Box } from '../../Box/Box';
import { CurrentScheme } from './CurrentScheme';
import * as DarkSchemeStories from './DarkScheme.stories';

<Meta of={DarkSchemeStories} />

# Color Scheme Management

All components in Wave automatically adapts to the users preferred color scheme.

There are situations where you want to force a specific color scheme to a component, or a group of components.
Wave provides a few options to help you with this.

## Invert Color Scheme

`InvertedColorScheme` component inverts the color scheme of all children components:

-   _dark_ scheme if user prefers light scheme
-   _light_ scheme it user prefers dark scheme

☝️ The preference is derived from the OS and browser settings.

Demo:

<Box className='wave'>
    <CurrentScheme />

    <Story of={DarkSchemeStories.InvertedColorSchemeWithButton} />

</Box>

<Source of={DarkSchemeStories.InvertedColorSchemeWithButton} />

## Light Scheme

`LightScheme` component forces the _light_ color scheme to children components, no matter what the user's preferred color scheme is.

<Story of={DarkSchemeStories.LightSchemeWithButton} />
<Source of={DarkSchemeStories.LightSchemeWithButton} />

## Dark Scheme

`DarkScheme` component forces the _dark_ color scheme to children components, no matter what the user's preferred color scheme is.

<Story of={DarkSchemeStories.DarkSchemeWithButton} />
<Source of={DarkSchemeStories.DarkSchemeWithButton} />

## Props

All components accept [`Box` props](/docs/components-box--docs).

## Programmatically enforcing a Scheme

In case the above components don't fit your use case Wave offers an `enforceSchemeOnElement` utility as an escape hatch to enforce a color scheme for a passed HTML Element.

> The main use case for it is when you want to enforce a scheme for an element that you cannot access through JSX/HTML and need to do it thorugh JS.

<Story of={DarkSchemeStories.ProgrammaticDarkSchemeWithButton} />

```tsx
useEffect(() => {
    const boxElement = document.querySelector('#box-to-enforce-scheme');
    if (boxElement) enforceSchemeOnElement('dark-scheme', boxElement);
}, []);

return (
    <Box {...props} id="box-to-enforce-scheme" textAlign="center">
        {children}
    </Box>
);
```
