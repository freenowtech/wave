import { useState, ChangeEvent } from 'react';
import { Canvas, Story, ArgsTable, Meta } from '@storybook/addon-docs';
import { StyledSystemLinks } from '../../../docs/StyledSystemLinks';
import { Button } from '../../../components/Button/Button';
import { Text } from '../../../components/Text/Text';
import { Link } from '../../../components/Link/Link';
import { Box } from '../../../components/Box/Box';
import { TextButton } from '../../../components/Button/TextButton';
import { SettingsIcon, DownloadIcon, TrashBinIcon, StopWatchIcon } from '../../../icons';
import { Popover } from '../Popover';

<Meta
    title="Components/Popover"
    component={Popover}
    argTypes={{
        placement: {
            options: [
                'top-start',
                'top-end',
                'bottom-start',
                'bottom-end',
                'right-start',
                'right-end',
                'left-start',
                'left-end',
                'auto',
                'auto-start',
                'auto-end',
                'top',
                'left',
                'right',
                'bottom'
            ],
            defaultValue: 'bottom-start',
            control: 'select'
        },
        isOpen: {
            options: [true, false],
            defaultValue: false,
            control: 'radio'
        },
        offset: {
            defaultValue: 5,
            control: 'number'
        },
        padding: {
            defaultValue: 0,
            control: 'number'
        }
    }}
/>

export const Template = args => <Popover {...args}>Trigger</Popover>;

# Popover

**Primary UI element for content whose visibility can be toggled with a click on a trigger element**

Renders a UI component that opens a popup dialog when user clicks on a trigger element.

<br />

## Properties

<ArgsTable of={Popover} />

<br />

### Popover Trigger & Content

Popover components consist of 2 main elements:

-   **Popover Trigger** – an element that shows/hides the Popover.
-   **Popover Content** – card with content that is toggled by the Trigger.
    <br />
    <br />

For **Trigger** you can use just a plain string (for default variant), or following components from Wave:

-   **&lt;Text&gt;**
-   **&lt;Button&gt;**
-   **&lt;Button&gt; with Icon**
-   **&lt;Icon&gt;**
-   **&lt;Link&gt;**

The **Popover Content** acts as a container for any content: text, form, or anything else...

<br />

### Difference from a Tooltip component

-   Popover is toggled by clicking on (not hovering over) the Trigger. The second click (or click outside the Popover) hides the Popover.
-   Popover scrolls with the page
-   Popover content and trigger are not limited to text.

<br />

### Style Props

The Popover supports:

-   **placement** prop for specifying the Popover content attachment in relation to the Popover trigger
-   **offset** prop for the margin between Trigger and Popover card.

<br />

# Stories

<br />

### Default - passing only string as trigger

<Canvas>
    <Story name="Default">
        <Popover content={<Text>Content for the Popover. Can contain Icons, Forms or other elements.</Text>}>
            Trigger
        </Popover>
    </Story>
</Canvas>

### With Button as trigger

<Canvas>
    <Story name="With Button as trigger">
        <Popover content={<Link>Open in Payment CRM</Link>}>
            <Button size="small" variant="primary">
                <SettingsIcon size={20} />
                &nbsp;Manage Booking
            </Button>
        </Popover>
    </Story>
</Canvas>

### Bulk Actions

<Canvas>
    <Story name="Bulk Actions">
        <Popover
            padding={1}
            content={
                <Box display="flex" flexDirection="column" alignItems="flex-start">
                    <TextButton>
                        <DownloadIcon size={20} />
                        &nbsp;Download
                    </TextButton>
                    <TextButton>
                        <StopWatchIcon size={20} />
                        &nbsp;Archive
                    </TextButton>
                    <TextButton variant="danger">
                        <TrashBinIcon size={20} />
                        &nbsp;Remove
                    </TextButton>
                </Box>
            }
        >
            <Button size="small" variant="secondary">
                ...
            </Button>
        </Popover>
    </Story>
</Canvas>

### No Padding

<Canvas>
    <Story name="No Padding">
        <Popover
            padding={0}
            content={<Text>Content for the Popover. Can contain Icons, Forms or other elements.</Text>}
        >
            Trigger
        </Popover>
    </Story>
</Canvas>
