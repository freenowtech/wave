import { useState } from 'react';
import { Canvas, Story, ArgsTable, Meta } from '@storybook/addon-docs';
import { Offcanvas } from '../Offcanvas';
import { OffcanvasCreator, offcanvasContent } from './OffcanvasCreator';
import { StyledSystemLinks } from '../../../docs/StyledSystemLinks';
import { Button } from '../..';

<Meta title="Components/Offcanvas" component={Offcanvas} />

export const Template = args => {
    const [open, setOpen] = useState(false);
    const openCanvas = () => setOpen(true);
    const closeCanvas = () => setOpen(false);
    return (
        <>
            <Button size="small" mr={1} onClick={openCanvas}>
                Open Offcanvas
            </Button>
            {open && <Offcanvas {...args} onClose={closeCanvas} />}
        </>
    );
};

# Offcanvas

The Offcanvas should only contain content or flows which are related to the current page and not replace pages, therefore
its complexity level has to be simple. Consider the fullscreen state if you want to focus the users attention to the Offcanvas
content.

Offcanvas is responsive per default but the width can be adjusted (the default is 600px or 37.5rem). Content on the Offcanvas
is scrollable and has a space5 bounding box.

<Canvas withSource="none">
    <Story
        name="Default"
        args={{
            children: offcanvasContent
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>

### Example Code

The following contains a simple example, with a resulting Offcanvas similar to the live examples above.

```jsx
const [showOffcanvas, setShowOffcanvas] = useState(true);

<Offcanvas onClose={() => setShowOffcanvas(false)} fullscreen={true}>
    {dismiss => (
        <>
            <Headline as="h2">Add Note</Headline>
            <Text as="p" my={3}>
                Ensure that all participants are aware of the change.
            </Text>
            <Button onClick={dismiss}>Add Note</Button>
            <TextButton onClick={dismiss}>Cancel</TextButton>
        </>
    )}
</Offcanvas>;
```

### More examples

<Canvas withSource="none">
    <OffcanvasCreator />
</Canvas>

## API

<ArgsTable of={Offcanvas} />

<StyledSystemLinks component="Offcanvas" supportedProps={['width']} />

### Dismiss

Offcanvas provides a function to dismiss the component with an animation. The
dismiss function is available either through render props or a hook. After the
animation has finished the `onClose` callback will be called.

#### Render Props

```jsx
<Offcanvas>{dismiss => <Button onClick={dismiss}>Close</Button>}</Offcanvas>
```

#### Hook

```jsx
const InsideOffcanvas = () => {
    const dismiss = useOffcanvasDismiss();
    return <button onClick={dismiss}>Close</button>;
};

const OffcanvasWrapper = () => (
    <Offcanvas>
        <InsideOffcanvas />
    </Offcanvas>
);
```
